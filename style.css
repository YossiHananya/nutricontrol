/* ═══════════════════════════════════════════════════════
   style.css — NutriControl global styles
   RTL Hebrew UI, CSS custom properties, mobile-first
   ═══════════════════════════════════════════════════════ */

:root{
  --bg:#f5f2eb;--surface:#fff;--primary:#0a3d2e;--primary-light:#1a6b50;
  --accent:#c8a96e;--accent-light:#f0e6d0;
  --danger:#c0392b;--danger-light:#fdecea;
  --success:#1a6b50;--success-light:#e8f5f0;
  --text:#1a1a1a;--text-muted:#7a7a6e;--border:#e5e0d5;
  --radius:16px;--shadow:0 4px 24px rgba(10,61,46,.08);--shadow-lg:0 12px 48px rgba(10,61,46,.14);
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Rubik,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;direction:rtl}
.hidden{display:none!important}
#auth-screen{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;background:var(--primary)}
.auth-logo{font-family:"DM Serif Display",serif;font-size:36px;color:#fff;margin-bottom:8px}
.auth-sub{color:rgba(255,255,255,.6);font-size:14px;margin-bottom:32px}
.auth-card{background:#fff;border-radius:20px;padding:28px;width:100%;max-width:360px;box-shadow:var(--shadow-lg)}
.auth-tabs{display:flex;gap:4px;background:var(--bg);border-radius:10px;padding:4px;margin-bottom:20px}
.auth-tab{flex:1;padding:8px;border:none;border-radius:8px;font-family:Rubik,sans-serif;font-size:14px;cursor:pointer;background:transparent;color:var(--text-muted)}
.auth-tab.active{background:#fff;color:var(--primary);font-weight:600;box-shadow:0 2px 8px rgba(0,0,0,.1)}
.form-group{margin-bottom:14px}
.form-group label{display:block;font-size:12px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}
.form-group input,.form-group select,.form-group textarea{width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:10px;font-family:Rubik,sans-serif;font-size:14px;background:var(--surface);color:var(--text);outline:none;transition:border .2s}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{border-color:var(--primary)}
.form-group textarea{height:72px;resize:none}
.btn{width:100%;padding:12px;border:none;border-radius:12px;font-family:Rubik,sans-serif;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s}
.btn-primary{background:var(--primary);color:#fff}
.btn-primary:hover{background:var(--primary-light)}
.btn-secondary{background:var(--bg);color:var(--text);border:1.5px solid var(--border)}
.btn-excel{background:#1a7a40;color:#fff;display:flex;align-items:center;justify-content:center;gap:8px}
.btn-sm{padding:7px 14px;font-size:13px;width:auto}
#app{display:none;flex-direction:column;min-height:100vh;max-width:430px;margin:0 auto;padding-bottom:72px}
.page{display:none;padding:20px 16px;flex:1}
.page.active{display:block}
nav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:430px;background:#fff;border-top:1px solid var(--border);display:flex;z-index:100;box-shadow:0 -4px 16px rgba(0,0,0,.06)}
.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;padding:10px 4px;border:none;background:transparent;cursor:pointer;font-family:Rubik,sans-serif;font-size:11px;color:var(--text-muted);transition:color .2s;position:relative}
.nav-item.active{color:var(--primary)}
.nav-icon{font-size:20px;margin-bottom:2px}
.nav-badge{position:absolute;top:6px;right:calc(50% - 20px);background:var(--danger);color:#fff;font-size:10px;border-radius:10px;padding:1px 5px;font-weight:700}
.card{background:#fff;border-radius:var(--radius);padding:16px;margin-bottom:12px;box-shadow:var(--shadow)}
.card-title{font-size:14px;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:12px}
.page-title{font-family:"DM Serif Display",serif;font-size:26px;color:var(--primary);margin-bottom:4px}
.page-subtitle{font-size:13px;color:var(--text-muted);margin-bottom:16px}
.points-hero{background:var(--primary);border-radius:20px;padding:24px;color:#fff;margin-bottom:16px}
.month-label{font-size:12px;opacity:.7;text-transform:uppercase;letter-spacing:.8px;margin-bottom:8px}
.points-main{display:flex;align-items:baseline;gap:8px;margin-bottom:12px}
.points-number{font-family:"DM Serif Display",serif;font-size:52px;line-height:1}
.points-target{font-size:16px;opacity:.7}
.progress-bar-wrap{background:rgba(255,255,255,.2);border-radius:8px;height:8px;overflow:hidden;margin-bottom:8px}
.progress-bar-fill{height:100%;background:#fff;border-radius:8px;transition:width .6s ease}
.progress-label{font-size:12px;opacity:.7}
.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}
.stat-card{background:#fff;border-radius:14px;padding:14px;text-align:center;box-shadow:var(--shadow)}
.stat-icon{font-size:20px;margin-bottom:4px}
.stat-num{font-family:"DM Serif Display",serif;font-size:24px;color:var(--primary)}
.stat-label{font-size:11px;color:var(--text-muted)}
.activity-item{display:flex;align-items:center;gap:12px;padding:12px 0;border-bottom:1px solid var(--border)}
.activity-item:last-child{border-bottom:none}
.activity-icon{width:40px;height:40px;background:var(--accent-light);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.activity-info{flex:1}
.activity-title{font-weight:600;font-size:14px;margin-bottom:2px}
.activity-meta{font-size:12px;color:var(--text-muted)}
.activity-points{font-family:"DM Serif Display",serif;font-size:18px;color:var(--primary);white-space:nowrap}
.pill-group{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}
.pill{padding:8px 16px;border:1.5px solid var(--border);border-radius:20px;background:transparent;font-family:Rubik,sans-serif;font-size:13px;cursor:pointer;transition:all .2s;color:var(--text)}
.pill.active{background:var(--primary);border-color:var(--primary);color:#fff}
.section-label{font-size:12px;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;margin:16px 0 10px}
.sub-pill{padding:6px 14px;border:1.5px solid var(--border);border-radius:20px;background:transparent;font-family:Rubik,sans-serif;font-size:13px;cursor:pointer;transition:all .2s;color:var(--text);white-space:nowrap}
.sub-pill.active{background:var(--accent);border-color:var(--accent);color:#fff}
.points-preview{background:var(--accent-light);border-radius:12px;padding:14px;text-align:center;margin-top:16px}
.points-preview-label{font-size:12px;color:var(--text-muted);margin-bottom:4px}
.points-preview-num{font-family:"DM Serif Display",serif;font-size:36px;color:var(--primary)}
.nutri-row{display:flex;align-items:center;gap:12px;padding:12px 0;border-bottom:1px solid var(--border);cursor:pointer}
.nutri-row:last-child{border-bottom:none}
.nutri-avatar{width:44px;height:44px;background:var(--primary);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;flex-shrink:0}
.nutri-info{flex:1}
.nutri-name{font-weight:600;font-size:14px;margin-bottom:2px}
.nutri-meta{font-size:12px;color:var(--text-muted);margin-bottom:4px}
.mini-bar{background:var(--border);border-radius:4px;height:4px;overflow:hidden}
.mini-bar-fill{height:100%;background:var(--primary);border-radius:4px;transition:width .4s}
.nutri-pts{text-align:center}
.pts-num{font-family:"DM Serif Display",serif;font-size:20px;color:var(--primary)}
.pts-pct{font-size:11px;color:var(--text-muted)}
.rule-card{display:flex;align-items:center;gap:12px;padding:12px 0;border-bottom:1px solid var(--border)}
.rule-card:last-child{border-bottom:none}
.rule-icon{width:40px;height:40px;background:var(--accent-light);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.rule-info{flex:1}
.rule-name{font-weight:600;font-size:14px;margin-bottom:2px}
.rule-desc{font-size:12px;color:var(--text-muted)}
#trend-bars{display:flex;align-items:flex-end;gap:6px;height:72px}
.month-bar-wrap{flex:1;display:flex;flex-direction:column;align-items:center;position:relative}
.month-bar{width:100%;background:var(--accent-light);border-radius:4px 4px 0 0;transition:height .4s}
.month-bar.current{background:var(--primary)}
.month-bar.future{background:var(--border);opacity:.5}
.month-bar-label{font-size:10px;color:var(--text-muted);margin-top:4px;text-align:center}
#modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1000;display:flex;align-items:flex-end;justify-content:center}
#modal-overlay.hidden{display:none}
#modal-body{background:#fff;border-radius:20px 20px 0 0;padding:24px;width:100%;max-width:430px;max-height:85vh;overflow-y:auto}
.modal-title{font-family:"DM Serif Display",serif;font-size:22px;color:var(--primary);margin-bottom:16px}
#toast{position:fixed;bottom:90px;left:50%;transform:translateX(-50%);background:#1a1a1a;color:#fff;padding:10px 20px;border-radius:20px;font-size:14px;opacity:0;transition:opacity .3s;z-index:2000;pointer-events:none;white-space:nowrap}
#toast.show{opacity:1}
.timed-group{background:var(--accent-light);border-radius:12px;padding:14px;margin-top:8px}
.text-muted{color:var(--text-muted);font-size:13px}
.month-pill{display:inline-flex;flex-direction:column;align-items:center;padding:8px 14px;border-radius:12px;border:1.5px solid var(--border);background:var(--surface);cursor:pointer;transition:all .2s;white-space:nowrap;font-family:Rubik,sans-serif;gap:2px}
.month-pill:hover{border-color:var(--primary);background:var(--success-light)}
.month-pill.active{background:var(--primary);border-color:var(--primary);color:#fff}
.month-pill .mp-month{font-size:13px;font-weight:600}
.month-pill .mp-target{font-size:10px;opacity:.7}
.month-pill.future{opacity:.65}
.month-pill.future.active{opacity:1}
#month-scroller-wrap::-webkit-scrollbar,#admin-month-scroller-wrap::-webkit-scrollbar{display:none}
.date-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}

/* Desktop date picker */
@media (hover:hover) and (pointer:fine){
  .date-wrapper{position:relative}
  .date-wrapper input[type="date"]{
    position:absolute;top:0;left:0;width:1px;height:1px;opacity:0;pointer-events:none;
  }
  .date-il-display{
    width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:10px;
    font-family:Rubik,sans-serif;font-size:14px;background:var(--surface);color:var(--text);
    display:flex;align-items:center;justify-content:space-between;cursor:pointer;
    transition:border .2s;user-select:none;
  }
  .date-il-display:hover{border-color:var(--primary)}
  .date-il-display .cal-icon{font-size:16px;opacity:.5}
}
@media not all and (hover:hover) and (pointer:fine){
  .date-il-display{display:none}
  .date-wrapper input[type="date"]{position:static;opacity:1;width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:10px;font-family:Rubik,sans-serif;font-size:14px;background:var(--surface);color:var(--text);direction:ltr}
}
